@using BlazorApp.Components.Base
@inject ProtectedLocalStorage ProtectedLocalStore
<div class="flex w-full gap-3 @css">
    <div class="w-2/3">
        <Card>
            <Heading>
                <Header>
                    <h1 class="text-xl">Location</h1>
                </Header>
            </Heading>
            <div class="flex gap-4 mt-4 my-auto items-center">
                <div class="">
                    <Image ImageName="Solarscore.png" css="w-60 h-60" alt="Solar Score" />
                </div>
                <div class="flex flex-col justify-start gap-10">
                    <LocationItem Title="Address" ImageName="Point On Map.svg" Text="1234 Main Street" />
                    <LocationItem Title="Solar Score" ImageName="Sale.svg" Text="89%" />
                    <div class="translate-x-1">
                        <LocationItem Title="Avg Energy Production" ImageName="Accumulator.svg" Text="129 kw/h" />
                    </div>
                </div>
            </div>
        </Card>
    </div>
    <div class="w-1/3">
        <Card css="h-full">
            <div class="flex flex-col justify-center">
                <Heading>
                    <Header>
                        <h1 class="text-xl text-start">System Size</h1>
                    </Header>
                </Heading>
                <div class="flex justify-around gap-4 mt-4 scale-75">
                    @{
                        var numPanels = 0;
                        var numBatteries = 0;
                        if (reportAll.Count > 0)
                        {
                            numPanels = reportAll[0].numberOfPanels;
                            Console.WriteLine(numPanels);
                            numBatteries = reportAll[0].numberOfBatteries;
                            Console.WriteLine(numBatteries);
                        }
                    }
                    <Appliance ImageName="SolarPanels.svg" Name="Number of Panels" Count=@numPanels />
                    <Appliance ImageName="Batteries.svg" Name="Number of Batteries" Count=@numBatteries />
                </div>
                <div class="flex w-full justify-center items-center gap-1 mt-4">
                    <p class="text-5xl text-primary-900 font-semibold">5</p>
                    <p class="text-5xl text-gray-400 font-bold">kw</p>
                </div>
            </div>
        </Card>
    </div>
</div>

@code {
    [Parameter]
    public string? css { get; set; }
    private List<ReportAllModel> reportAll = new List<ReportAllModel>();


    protected override async Task OnInitializedAsync()
    {
        var repAll = await ProtectedLocalStore.GetAsync<List<ReportAllModel>>("userReports");
            if (repAll.Value != null)
            {
                reportAll = repAll.Value;    
            }
            Console.WriteLine(reportAll.Count + " is the count -" + reportAll[0].systemId);
    }

}